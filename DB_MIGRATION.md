# نقل البيانات إلى قاعدة بيانات Railway

هذا الملف يشرح كيفية نقل البيانات من قاعدة البيانات المحلية إلى قاعدة بيانات جديدة على Railway.

## الخطوات

### 1. إنشاء نسخة احتياطية من قاعدة البيانات المحلية

```bash
python manage.py dbbackup
```

هذا الأمر سينشئ نسخة احتياطية في مجلد `backups`.

### 2. رفع التغييرات إلى GitHub

```bash
git add .
git commit -m "إعداد قاعدة بيانات Railway"
git push
```

### 3. استيراد النسخة الاحتياطية في قاعدة البيانات الجديدة

بعد نشر التطبيق على Railway، يمكنك استيراد النسخة الاحتياطية باستخدام واجهة Railway:

1. انتقل إلى مشروعك على Railway
2. انقر على قاعدة البيانات PostgreSQL
3. انقر على تبويب "Data" (البيانات)
4. انقر على "Import" (استيراد)
5. قم بتحميل ملف النسخة الاحتياطية من مجلد `backups`

أو يمكنك استخدام أمر `pg_restore` من جهازك المحلي:

```bash
pg_restore -h <RAILWAY_DB_HOST> -p <RAILWAY_DB_PORT> -U <RAILWAY_DB_USER> -d <RAILWAY_DB_NAME> -v <BACKUP_FILE>
```

### 4. التحقق من النتائج

بعد اكتمال عملية النقل، يمكنك التحقق من النتائج عن طريق:

1. الوصول إلى التطبيق على Railway
2. تسجيل الدخول باستخدام اسم المستخدم وكلمة المرور (admin/admin)
3. التحقق من أن البيانات موجودة

## استكشاف الأخطاء وإصلاحها

إذا واجهت أي مشاكل أثناء عملية النقل، فيمكنك:

1. التحقق من سجلات النشر على Railway
2. التأكد من صحة بيانات الاتصال بقاعدة البيانات
3. التحقق من أن قاعدة البيانات الجديدة فارغة وجاهزة للاستخدام
4. التأكد من أن لديك الصلاحيات اللازمة للوصول إلى قاعدة البيانات

## العودة إلى قاعدة البيانات المحلية

إذا كنت بحاجة إلى العودة إلى قاعدة البيانات المحلية، فقم بتعديل ملف `.env` لاستخدام بيانات الاتصال المحلية:

```
DB_NAME=crm_system
DB_USER=crm_user
DB_PASSWORD=5525
DB_HOST=localhost
DB_PORT=5432
```

ثم قم بإعادة تشغيل الخادم المحلي.
