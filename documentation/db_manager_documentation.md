# توثيق وحدة إدارة قواعد البيانات

## مقدمة

وحدة إدارة قواعد البيانات هي وحدة جديدة تم إضافتها إلى نظام الخواجه لتوفير واجهة سهلة الاستخدام لإدارة قواعد البيانات والنسخ الاحتياطية واستيراد البيانات. تهدف هذه الوحدة إلى تبسيط عمليات إدارة قواعد البيانات وتوفير واجهة موحدة للمستخدمين للتعامل مع جميع جوانب قواعد البيانات.

تاريخ الإنشاء: 14 مايو 2025

---

## 1. نظرة عامة على الوحدة

### 1.1 الوظائف الرئيسية

تتكون وحدة إدارة قواعد البيانات من أربعة أقسام رئيسية:

1. **إدارة قواعد البيانات**: إنشاء وتحديث وحذف إعدادات قواعد البيانات، وتعيين قاعدة بيانات افتراضية.
2. **النسخ الاحتياطي والاستعادة**: إنشاء نسخ احتياطية لقواعد البيانات واستعادتها عند الحاجة.
3. **استيراد البيانات**: استيراد البيانات من ملفات مختلفة (JSON, SQL, DUMP).
4. **إعداد النظام**: إعداد النظام لأول مرة مع إمكانية إنشاء رموز إعداد.

### 1.2 هيكل الوحدة

تتكون الوحدة من المكونات التالية:

- **النماذج (Models)**: لتخزين إعدادات قواعد البيانات والنسخ الاحتياطية وعمليات الاستيراد.
- **الخدمات (Services)**: لتنفيذ العمليات المختلفة مثل إنشاء النسخ الاحتياطية واستعادتها واستيراد البيانات.
- **المشاهدات (Views)**: لعرض واجهات المستخدم ومعالجة الطلبات.
- **القوالب (Templates)**: لعرض واجهات المستخدم.
- **المسارات (URLs)**: لتوجيه الطلبات إلى المشاهدات المناسبة.

---

## 2. إدارة قواعد البيانات

### 2.1 إنشاء قاعدة بيانات جديدة

يمكن للمستخدمين إنشاء قاعدة بيانات جديدة من خلال الخطوات التالية:

1. الانتقال إلى صفحة "قائمة قواعد البيانات".
2. النقر على زر "إضافة قاعدة بيانات".
3. ملء النموذج بالمعلومات المطلوبة:
   - اسم قاعدة البيانات
   - نوع قاعدة البيانات (PostgreSQL, MySQL, SQLite)
   - معلومات الاتصال (المضيف، المنفذ، اسم المستخدم، كلمة المرور)
   - اسم قاعدة البيانات في الخادم
   - خيارات إضافية (نشطة، افتراضية)
4. النقر على زر "إنشاء قاعدة البيانات".

### 2.2 تعديل قاعدة بيانات

يمكن للمستخدمين تعديل إعدادات قاعدة بيانات موجودة من خلال الخطوات التالية:

1. الانتقال إلى صفحة "قائمة قواعد البيانات".
2. النقر على زر "تعديل" بجانب قاعدة البيانات المطلوبة.
3. تعديل المعلومات المطلوبة.
4. النقر على زر "حفظ التغييرات".

### 2.3 حذف قاعدة بيانات

يمكن للمستخدمين حذف قاعدة بيانات من خلال الخطوات التالية:

1. الانتقال إلى صفحة "قائمة قواعد البيانات".
2. النقر على زر "حذف" بجانب قاعدة البيانات المطلوبة.
3. تأكيد الحذف.

**ملاحظة**: حذف قاعدة البيانات يحذف فقط إعدادات قاعدة البيانات من النظام، ولا يحذف قاعدة البيانات نفسها من الخادم.

### 2.4 تعيين قاعدة بيانات افتراضية

يمكن للمستخدمين تعيين قاعدة بيانات كافتراضية من خلال الخطوات التالية:

1. الانتقال إلى صفحة "قائمة قواعد البيانات".
2. النقر على زر "تعيين كافتراضية" بجانب قاعدة البيانات المطلوبة.
3. تأكيد العملية.

---

## 3. النسخ الاحتياطي والاستعادة

### 3.1 إنشاء نسخة احتياطية

يمكن للمستخدمين إنشاء نسخة احتياطية لقاعدة بيانات من خلال الخطوات التالية:

1. الانتقال إلى صفحة "النسخ الاحتياطية".
2. النقر على زر "إنشاء نسخة احتياطية".
3. ملء النموذج بالمعلومات المطلوبة:
   - اسم النسخة الاحتياطية
   - قاعدة البيانات المراد نسخها
   - نوع النسخة الاحتياطية (كاملة، هيكل فقط، بيانات فقط)
   - وصف (اختياري)
4. النقر على زر "إنشاء نسخة احتياطية".

### 3.2 استعادة نسخة احتياطية

يمكن للمستخدمين استعادة نسخة احتياطية من خلال الخطوات التالية:

1. الانتقال إلى صفحة "النسخ الاحتياطية".
2. النقر على زر "استعادة" بجانب النسخة الاحتياطية المطلوبة.
3. اختيار ما إذا كان يجب حذف البيانات القديمة قبل الاستعادة.
4. النقر على زر "استعادة النسخة الاحتياطية".

### 3.3 تنزيل نسخة احتياطية

يمكن للمستخدمين تنزيل نسخة احتياطية من خلال الخطوات التالية:

1. الانتقال إلى صفحة "النسخ الاحتياطية".
2. النقر على زر "تنزيل" بجانب النسخة الاحتياطية المطلوبة.

### 3.4 حذف نسخة احتياطية

يمكن للمستخدمين حذف نسخة احتياطية من خلال الخطوات التالية:

1. الانتقال إلى صفحة "النسخ الاحتياطية".
2. النقر على زر "حذف" بجانب النسخة الاحتياطية المطلوبة.
3. تأكيد الحذف.

---

## 4. استيراد البيانات

### 4.1 استيراد بيانات من ملف

يمكن للمستخدمين استيراد بيانات من ملف من خلال الخطوات التالية:

1. الانتقال إلى صفحة "استيراد البيانات".
2. اختيار قاعدة البيانات المراد الاستيراد إليها.
3. اختيار ملف الاستيراد (JSON, SQL, DUMP).
4. اختيار ما إذا كان يجب حذف البيانات القديمة قبل الاستيراد.
5. النقر على زر "استيراد".

### 4.2 عرض سجلات الاستيراد

يمكن للمستخدمين عرض سجلات الاستيراد السابقة من خلال الخطوات التالية:

1. الانتقال إلى صفحة "استيراد البيانات".
2. النقر على زر "عرض" بجانب سجل الاستيراد المطلوب.

---

## 5. إعداد النظام

### 5.1 إعداد النظام لأول مرة

يمكن للمستخدمين إعداد النظام لأول مرة من خلال الخطوات التالية:

1. الانتقال إلى صفحة "إعداد النظام".
2. ملء النموذج بالمعلومات المطلوبة:
   - معلومات قاعدة البيانات
   - معلومات المدير (اسم المستخدم، كلمة المرور، البريد الإلكتروني)
   - ملف استيراد (اختياري)
3. النقر على زر "إعداد النظام".

### 5.2 إنشاء رمز إعداد

يمكن للمستخدمين إنشاء رمز إعداد للسماح للمستخدمين الآخرين بإعداد النظام من خلال الخطوات التالية:

1. الانتقال إلى صفحة "رموز الإعداد".
2. النقر على زر "إنشاء رمز إعداد".
3. تحديد مدة صلاحية الرمز.
4. النقر على زر "إنشاء رمز".

---

## 6. الأمان والصلاحيات

### 6.1 صلاحيات الوصول

تتطلب وحدة إدارة قواعد البيانات صلاحيات مدير النظام (superuser) للوصول إليها. يمكن للمستخدمين العاديين الوصول إلى الوحدة فقط إذا تم منحهم الصلاحيات المناسبة.

### 6.2 تسجيل الأحداث

تقوم الوحدة بتسجيل جميع العمليات المهمة مثل إنشاء النسخ الاحتياطية واستعادتها واستيراد البيانات. يمكن للمستخدمين عرض سجلات العمليات من خلال صفحات التفاصيل المختلفة.

---

## 7. استكشاف الأخطاء وإصلاحها

### 7.1 مشاكل الاتصال بقاعدة البيانات

إذا واجهت مشاكل في الاتصال بقاعدة البيانات، تحقق من:

- صحة معلومات الاتصال (المضيف، المنفذ، اسم المستخدم، كلمة المرور).
- وجود قاعدة البيانات في الخادم.
- صلاحيات المستخدم للوصول إلى قاعدة البيانات.

### 7.2 مشاكل النسخ الاحتياطي

إذا واجهت مشاكل في إنشاء النسخ الاحتياطية، تحقق من:

- وجود الأدوات المطلوبة (pg_dump, mysqldump) على الخادم.
- صلاحيات المستخدم لإنشاء النسخ الاحتياطية.
- وجود مساحة كافية على القرص.

### 7.3 مشاكل الاستيراد

إذا واجهت مشاكل في استيراد البيانات، تحقق من:

- صحة ملف الاستيراد.
- توافق ملف الاستيراد مع نوع قاعدة البيانات.
- صلاحيات المستخدم لاستيراد البيانات.

---

## 8. الخاتمة

وحدة إدارة قواعد البيانات هي إضافة قيمة لنظام الخواجه، توفر واجهة سهلة الاستخدم لإدارة قواعد البيانات والنسخ الاحتياطية واستيراد البيانات. تهدف هذه الوحدة إلى تبسيط عمليات إدارة قواعد البيانات وتوفير واجهة موحدة للمستخدمين للتعامل مع جميع جوانب قواعد البيانات.

للاستفسارات أو الاقتراحات، يرجى التواصل مع فريق التطوير.

---

**تم إعداد هذا التوثيق بواسطة: فريق تطوير نظام الخواجه**
