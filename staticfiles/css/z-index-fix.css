/**
 * Z-Index Fix - إصلاح شامل لمشاكل الطبقات والتداخل
 * يحل جميع مشاكل z-index في النظام
 */

/* ===== تحديد طبقات النظام بوضوح ===== */

/* الطبقة الأساسية - الخلفية والمحتوى العادي */
body,
.container,
.row,
.col,
main {
    z-index: 1 !important;
}

/* طبقة المحتوى الرئيسي */
.hero-section,
.content-section,
.dashboard-container {
    z-index: 10 !important;
    position: relative !important;
}

/* طبقة البطاقات والعناصر التفاعلية */
.card,
.icon-card,
.stat-card,
.chart-container,
.data-table-container {
    z-index: 50 !important;
    position: relative !important;
}

/* طبقة الأزرار والروابط */
.btn,
.btn-group,
.badge,
a {
    z-index: 100 !important;
    position: relative !important;
}

/* طبقة النماذج والمدخلات */
.form-control,
.form-select,
.input-group {
    z-index: 200 !important;
    position: relative !important;
}

/* طبقة التنبيهات والإشعارات */
.alert,
.toast,
.notification {
    z-index: 500 !important;
    position: relative !important;
}

/* طبقة القوائم المنسدلة العادية */
.dropdown-menu {
    z-index: 1000 !important;
    position: absolute !important;
}

/* طبقة الهيدر والتنقل */
.navbar,
.navbar-brand,
.navbar-nav,
.nav-item,
.nav-link {
    z-index: 5000 !important;
    position: relative !important;
}

/* طبقة القوائم المنسدلة في الهيدر - أولوية قصوى */
.navbar .dropdown,
.navbar .dropdown-menu,
.navbar .dropdown-toggle,
.navbar .dropdown-item {
    z-index: 99999 !important;
    position: relative !important;
}

/* إصلاح خاص لقائمة المستخدم */
.navbar .dropdown-menu {
    z-index: 999999 !important;
    position: absolute !important;
    top: 100% !important;
    right: 0 !important;
    left: auto !important;
    transform: none !important;
    margin-top: 0.5rem !important;
}

/* طبقة العناصر العائمة */
.floating-element,
.theme-toggle-btn,
.back-to-top {
    z-index: 8000 !important;
    position: fixed !important;
}

/* طبقة النوافذ المنبثقة */
.modal,
.modal-dialog,
.modal-content {
    z-index: 9000 !important;
    position: fixed !important;
}

/* طبقة التحميل والانتظار */
.loading,
.spinner,
.overlay {
    z-index: 9500 !important;
    position: fixed !important;
}

/* ===== إصلاحات خاصة للهيدر ===== */

/* تأكد من أن جميع عناصر الهيدر لها أولوية عالية */
.navbar * {
    z-index: inherit !important;
}

/* إصلاح خاص للقوائم المنسدلة في الهيدر */
.navbar .dropdown-menu {
    z-index: 10001 !important;
    position: absolute !important;
    top: 100% !important;
    left: 0 !important;
    transform: none !important;
}

/* إصلاح للأيقونات الملونة */
.colorful-icon-bar,
.colorful-icon-group,
.colorful-icon {
    z-index: 5001 !important;
    position: relative !important;
}

/* إصلاح للوغو */
.navbar-brand,
.white-logo,
.hero-logo,
.footer-logo {
    z-index: 5002 !important;
    position: relative !important;
}

/* ===== إصلاحات خاصة لشاشة الترحيب ===== */

/* تأكد من أن شاشة الترحيب لا تتداخل مع الهيدر */
.hero-section {
    z-index: 10 !important;
    position: relative !important;
    margin-top: 2rem !important;
    padding-top: 2rem !important;
}

/* إصلاح للمحتوى داخل شاشة الترحيب */
.hero-content,
.hero-title,
.hero-subtitle,
.integrated-stats {
    z-index: 11 !important;
    position: relative !important;
}

/* ===== إصلاحات خاصة للمخزون ===== */

/* إصلاح لبطاقات المخزون */
.inventory-dashboard-container {
    z-index: 10 !important;
    position: relative !important;
}

.icon-cards-container,
.stats-cards-container {
    z-index: 20 !important;
    position: relative !important;
}

.icon-card,
.stat-card {
    z-index: 30 !important;
    position: relative !important;
}

/* إصلاح للتأثيرات والانيميشن */
.icon-card::before,
.stat-card::after {
    z-index: -1 !important;
    position: absolute !important;
}

/* ===== إصلاحات للتجاوب ===== */

@media (max-width: 992px) {
    /* إصلاح للقائمة المنسدلة في الموبايل */
    .navbar-collapse {
        z-index: 5003 !important;
        position: relative !important;
        background: rgba(0, 0, 0, 0.95) !important;
        border-radius: 15px !important;
        margin-top: 1rem !important;
        padding: 1rem !important;
    }

    .navbar-toggler {
        z-index: 5004 !important;
        position: relative !important;
    }
}

/* ===== إصلاحات للتذييل ===== */

.footer,
.compact-footer {
    z-index: 100 !important;
    position: relative !important;
}

/* ===== إصلاحات عامة ===== */

/* تأكد من عدم تداخل العناصر */
* {
    box-sizing: border-box !important;
}

/* إصلاح للعناصر المخفية */
.d-none,
.hidden,
.invisible {
    z-index: -1 !important;
}

/* إصلاح للعناصر المرئية */
.d-block,
.d-flex,
.d-grid,
.visible {
    z-index: inherit !important;
}

/* ===== إصلاحات للطباعة ===== */

@media print {
    /* إخفاء العناصر غير المطلوبة في الطباعة */
    .navbar,
    .dropdown-menu,
    .floating-element,
    .theme-toggle-btn,
    .modal {
        z-index: -1 !important;
        display: none !important;
    }

    /* إظهار المحتوى الأساسي فقط */
    .hero-section,
    .content-section,
    .dashboard-container {
        z-index: 1 !important;
    }
}

/* ===== إصلاحات للوصولية ===== */

/* تأكد من أن العناصر القابلة للتركيز لها أولوية */
:focus,
:focus-visible {
    z-index: 1001 !important;
    position: relative !important;
}

/* إصلاح للقارئات الشاشة */
.sr-only,
.visually-hidden {
    z-index: -1 !important;
}

/* ===== إصلاحات للأداء ===== */

/* تحسين الأداء للعناصر المتحركة */
.hero-section,
.navbar,
.dropdown-menu,
.icon-card,
.stat-card {
    will-change: transform !important;
    backface-visibility: hidden !important;
}

/* ===== إصلاحات نهائية للقوائم المنسدلة ===== */

/* تأكد من أن قوائم المستخدم لها الأولوية القصوى */
.navbar .dropdown-menu,
.dropdown-menu.show,
.navbar .dropdown.show .dropdown-menu {
    z-index: 999999 !important;
    position: absolute !important;
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    transform: none !important;
    top: calc(100% + 0.5rem) !important;
    right: 0 !important;
    left: auto !important;
    min-width: 250px !important;
    max-width: 350px !important;
    background: var(--card-bg) !important;
    border: 2px solid var(--border-color) !important;
    border-radius: 15px !important;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8) !important;
    padding: 1rem !important;
}

/* إصلاح للعناصر داخل القائمة المنسدلة */
.navbar .dropdown-item {
    z-index: 999999 !important;
    position: relative !important;
    color: var(--text-light) !important;
    background: transparent !important;
    border: none !important;
    padding: 0.8rem 1rem !important;
    border-radius: 10px !important;
    transition: all 0.3s ease !important;
    margin-bottom: 0.3rem !important;
    display: flex !important;
    align-items: center !important;
}

.navbar .dropdown-item:hover,
.navbar .dropdown-item:focus {
    background: rgba(74, 144, 226, 0.2) !important;
    color: var(--light) !important;
    transform: translateX(-5px) !important;
}

/* إصلاح للأيقونات في القائمة */
.navbar .dropdown-item i {
    margin-left: 10px !important;
    width: 20px !important;
    text-align: center !important;
    color: var(--secondary) !important;
}

/* إصلاح للفواصل */
.navbar .dropdown-divider {
    border-color: var(--border-color) !important;
    margin: 0.8rem 0 !important;
    opacity: 0.5 !important;
}

/* إصلاح للعناوين */
.navbar .dropdown-header {
    color: var(--secondary) !important;
    font-weight: 700 !important;
    padding: 0.5rem 1rem !important;
    margin-bottom: 0.5rem !important;
    border-bottom: 1px solid var(--border-color) !important;
}

.hero-section {
    z-index: 1 !important;
    position: relative !important;
}

/* إصلاح أي تداخل محتمل */
body {
    overflow-x: hidden !important;
}

.container,
.container-fluid {
    overflow-x: hidden !important;
}

/* إصلاح خاص للتأكد من ظهور القائمة */
.navbar .nav-item.dropdown {
    position: relative !important;
    z-index: 999999 !important;
}

.navbar .nav-item.dropdown .dropdown-toggle {
    z-index: 999999 !important;
    position: relative !important;
}

/* إصلاح للشاشات الصغيرة */
@media (max-width: 992px) {
    .navbar .dropdown-menu {
        position: relative !important;
        top: auto !important;
        right: auto !important;
        left: auto !important;
        transform: none !important;
        margin-top: 0.5rem !important;
        width: 100% !important;
        max-width: none !important;
    }
}
